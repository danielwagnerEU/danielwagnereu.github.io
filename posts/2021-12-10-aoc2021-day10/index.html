<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Advent of Code 2021 Day 10 -</title><meta name=description content="Syntax Scoring solved using C#, advanced data structures and pattern matching."><meta name=author content="Daniel Wagner"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Daniel Wagner","url":"https:\/\/danielwagner.at\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/danielwagner.at\/"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/danielwagner.at\/","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/danielwagner.at\/posts\/2021-12-10-aoc2021-day10\/","name":"Advent of code 2021 day 10"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"Daniel Wagner"},"headline":"Advent of Code 2021 Day 10","description":"Syntax Scoring solved using C#, advanced data structures and pattern matching.","inLanguage":"en","wordCount":205,"datePublished":"2021-12-10T17:36:00","dateModified":"2021-12-10T17:36:00","image":"https:\/\/danielwagner.at\/img\/logo.avif","keywords":["aoc, software, csharp, dotnet"],"mainEntityOfPage":"https:\/\/danielwagner.at\/posts\/2021-12-10-aoc2021-day10\/","publisher":{"@type":"Organization","name":"https:\/\/danielwagner.at\/","logo":{"@type":"ImageObject","url":"https:\/\/danielwagner.at\/img\/logo.avif","height":60,"width":60}}}</script><meta property="og:title" content="Advent of Code 2021 Day 10"><meta property="og:description" content="Syntax Scoring solved using C#, advanced data structures and pattern matching."><meta property="og:image" content="https://danielwagner.at/img/logo.avif"><meta property="og:url" content="https://danielwagner.at/posts/2021-12-10-aoc2021-day10/"><meta property="og:type" content="website"><meta property="og:site_name" content="Daniel Wagner"><meta name=twitter:title content="Advent of Code 2021 Day 10"><meta name=twitter:description content="Syntax Scoring solved using C#, advanced data structures and pattern matching."><meta name=twitter:image content="https://danielwagner.at/img/logo.avif"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@daniel_wagn3r"><meta name=twitter:creator content="@daniel_wagn3r"><link href=https://danielwagner.at/img/favicon.png rel=icon type=image/x-icon><meta name=generator content="Hugo 0.109.0"><link rel=alternate href=https://danielwagner.at/index.xml type=application/rss+xml title="Daniel Wagner"><link rel=stylesheet href=https://danielwagner.at/css/katex.min.css><link rel=stylesheet href=https://danielwagner.at/fontawesome/css/all.css><link rel=stylesheet href=https://danielwagner.at/css/bootstrap.min.css><link rel=stylesheet href=https://danielwagner.at/css/main.css><link rel=stylesheet href=https://danielwagner.at/css/fonts.css><link rel=stylesheet href=https://danielwagner.at/css/syntax.css><link rel=stylesheet href=https://danielwagner.at/css/codeblock.css><link rel=stylesheet href=https://danielwagner.at/css/photoswipe.min.css><link rel=stylesheet href=https://danielwagner.at/css/photoswipe.default-skin.min.css></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=https://danielwagner.at/>Daniel Wagner</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=Blog href=/>Blog</a></li><li class=navlinks-container><a class=navlinks-parent>Projekte</a><div class=navlinks-children><a href=/projects/coderdojo>CoderDojo</a></div></li><li><a title=Leistungen href=/page/offering/>Leistungen</a></li><li><a title="Über mich" href=/page/about/>Über mich</a></li><li><a title=Tags href=/tags>Tags</a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="Daniel Wagner" href=https://danielwagner.at/><img class=avatar-img src=https://danielwagner.at/img/logo.avif alt="Daniel Wagner"></a></div></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=posts-heading><h1>Advent of Code 2021 Day 10</h1><hr class=small></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p><a href=https://adventofcode.com/2021/day/10><picture><img src=aoc-2021-10.webp alt="AoC 2021 Day 10" loading=lazy decoding=async width=644 height=232></picture></a></p><p>The theme for today is:</p><blockquote><p>Stack it, baby!</p></blockquote><h2 id=puzzle-one>Puzzle One</h2><p>This reminded my of one of my university lectures on compiler construction. There we used different data structures, to efficiently store the parsed programs. Often there were trees, but the key to day 10 is the <code>Stack</code> <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>. Accompanying I use <code>Dictionary</code> <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> to efficiently lookup of matching brackets and gained scores.</p><p>With these data structures prepared, a test if a pair of brackets is matching results in simple lookups:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-1>1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-2>2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-3>3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-4>4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-5>5</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-6>6</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-7>7</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>bool</span> Closes(<span style=color:#66d9ef>char</span> chunk, <span style=color:#66d9ef>char</span> match)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (!dict.ContainsKey(chunk))
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> dict[chunk] == match;
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><p>Or the computation of the score:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>return</span> errors.Select(e =&gt; syntaxPoints[e]).Sum();
</span></span></code></pre></td></tr></table></div></div><p>assuming errors is a list of the first illegal bracket of each line.</p><h2 id=puzzle-two>Puzzle Two</h2><p>After solving the first puzzly, the second one is only a slight variation. In puzzle one you detected the corrupted lines, so the remaining ones are potentially incomplete.</p><p>To complete a line, you simply look at the remainder of the <code>Stack</code> used during analysis of the line.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-1>1</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-2>2</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-3>3</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-4>4</a>
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-5>5</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=display:flex><span><span style=color:#66d9ef>foreach</span> (<span style=color:#66d9ef>var</span> c <span style=color:#66d9ef>in</span> chunks)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    score *= <span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>    score += completionPoints[dict[c]];
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h2 id=full-source>Full Source</h2><p>Full Source is available on GitHub. <sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.stack-1>https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.stack-1</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2>https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.dictionary-2</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://github.com/danielwagn3r/AoC-2021/tree/main/Day10>https://github.com/danielwagn3r/AoC-2021/tree/main/Day10</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><div class=blog-tags><a href=https://danielwagner.at//tags/aoc/>aoc</a>&nbsp;
<a href=https://danielwagner.at//tags/software/>software</a>&nbsp;
<a href=https://danielwagner.at//tags/csharp/>csharp</a>&nbsp;
<a href=https://danielwagner.at//tags/dotnet/>dotnet</a>&nbsp;</div><hr><section id=social-share><div class="list-inline footer-links"><div class=share-box aria-hidden=true><ul class=share><li><a href="//twitter.com/share?url=https%3a%2f%2fdanielwagner.at%2fposts%2f2021-12-10-aoc2021-day10%2f&text=Advent%20of%20Code%202021%20Day%2010&via=daniel_wagn3r" target=_blank title="Share on Twitter"><i class="fab fa-twitter"></i></a></li><li><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fdanielwagner.at%2fposts%2f2021-12-10-aoc2021-day10%2f" target=_blank title="Share on Facebook"><i class="fab fa-facebook"></i></a></li><li><a href="//reddit.com/submit?url=https%3a%2f%2fdanielwagner.at%2fposts%2f2021-12-10-aoc2021-day10%2f&title=Advent%20of%20Code%202021%20Day%2010" target=_blank title="Share on Reddit"><i class="fab fa-reddit"></i></a></li><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fdanielwagner.at%2fposts%2f2021-12-10-aoc2021-day10%2f&title=Advent%20of%20Code%202021%20Day%2010" target=_blank title="Share on LinkedIn"><i class="fab fa-linkedin"></i></a></li><li><a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fdanielwagner.at%2fposts%2f2021-12-10-aoc2021-day10%2f&title=Advent%20of%20Code%202021%20Day%2010" target=_blank title="Share on StumbleUpon"><i class="fab fa-stumbleupon"></i></a></li><li><a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fdanielwagner.at%2fposts%2f2021-12-10-aoc2021-day10%2f&description=Advent%20of%20Code%202021%20Day%2010" target=_blank title="Share on Pinterest"><i class="fab fa-pinterest"></i></a></li></ul></div></div></section></article><ul class="pager blog-pager"><li class=previous><a href=https://danielwagner.at/posts/2021-12-06-aoc2021-day6/ data-toggle=tooltip data-placement=top title="Advent of Code 2021 Day 6">&larr; Previous Post</a></li><li class=next><a href=https://danielwagner.at/posts/2022-11-26-archlinux-azure/ data-toggle=tooltip data-placement=top title="Arch Linux on Azure">Next Post &rarr;</a></li></ul></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:daniel@danielwagner.at title="Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.facebook.com/daniel.wagn3r title=Facebook><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-facebook fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/danielwagn3r title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://gitlab.com/danielwagn3r title=GitLab><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-gitlab fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/daniel_wagn3r title=Twitter><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/danielwagn3r title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://www.instagram.com/dani3lwagner title=Instagram><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-instagram fa-stack-1x fa-inverse"></i></span></a></li><li><a rel=me href=https://fedi.at/@danielwagn3r title=Mastodon><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-mastodon fa-stack-1x fa-inverse"></i></span></a></li><li><a href title=RSS><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted"><a href=https://danielwagner.at>Daniel Wagner</a>
&nbsp;&bull;&nbsp;&copy;
2023
&nbsp;&bull;&nbsp;
<a href=https://danielwagner.at/>Daniel Wagner</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.109.0</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a>
&nbsp;&bull;&nbsp;[<a href=https://github.com/danielwagnerEU/danielwagnereu.github.io/tree/3c1e21289b5bbb9157288cd1a6416087ef938fe7>3c1e2128</a>]</p></div></div></div></footer><script src=https://danielwagner.at/js/katex.min.js></script>
<script src=https://danielwagner.at/js/auto-render.min.js></script>
<script src=https://danielwagner.at/js/jquery-3.5.1.slim.min.js></script>
<script src=https://danielwagner.at/js/bootstrap.min.js></script>
<script src=https://danielwagner.at/js/main.js></script><script>renderMathInElement(document.body)</script><script src=https://danielwagner.at/js/photoswipe.min.js></script>
<script src=https://danielwagner.at/js/photoswipe-ui-default.min.js></script><script src=https://danielwagner.at/js/load-photoswipe.js></script><footer><p class=copyright>Impressum
<a href="https://www.wkoecg.at/Ecg.aspx?FirmaID=961a03fa-ef08-4827-854d-85fed0463c35&_ga=2.161793212.1888238834.1672323723-832547914.1654253026&_gl=1*1qlqecd*_ga*ODMyNTQ3OTE0LjE2NTQyNTMwMjY.*_ga_4YHGVSN5S4*MTY3MjM1NjY0Ni4yNy4xLjE2NzIzNTY4NDcuNTcuMC4w" target=_blank><img src=/img/ecg.webp alt="Informationspflicht lt. ECG und Mediengesetz" loading=lazy decoding=async width=169 height=23></a></p></footer></body></html>